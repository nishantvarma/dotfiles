#!/usr/bin/env rc

heading -t status
git status -s
git add -N .

if (! git diff --quiet) {
	heading stage
	git add -p
}

while (! git diff --cached --quiet) {
	heading sync
	notify -n green 'commit? [y,n,u,v,x] '
	reply=`{read}
	switch ($reply) {
	case y Y
		msg=`{prompt 'message' Fixups}
		git commit -m $"msg &&
		if (confirm 'push?')
			git push origin
	case u U
		git reset -p
	case x X
		git gui
	case v V
		gitk
	case *
		break
	}
}

true
